<p-toast></p-toast>
<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000" rejectButtonStyleClass="p-button-text"></p-confirmDialog> 

<div class="container">
    <h2 > <i class="pi pi-user-plus"></i> Ingrese un nuevo Siniestro </h2>
    <br>
    <div class="container">
        <p-accordion  >
            <p-accordionTab header="Nuevo Siniestro">
                <div class="container-form">
                <form  id="crearSiniestro">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Id</label>
                                <input type="number" class="form-control" aria-describedby="idSiniestro"  name="idSiniestro" [(ngModel)] = "nuevoSiniestro.idSiniestro" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Fecha Siniestro</label>
                                <input type="date" class="form-control" aria-describedby="fechaSiniestro" name="fechaSiniestro" [(ngModel)] = "nuevoSiniestro.fechaSiniestro" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Causas</label>
                                <input type="text" class="form-control" aria-describedby="causas" name="causas" [(ngModel)] = "nuevoSiniestro.causas" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Aceptado</label>
                                <input type="number" class="form-control" aria-describedby="aceptado" name="aceptado" [(ngModel)] = "nuevoSiniestro.aceptado" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Indenmización</label>
                                <input type="text" class="form-control" aria-describedby="indenmizacion" name="indenmizacion" [(ngModel)] = "nuevoSiniestro.indenmizacion" required>
                            </div> 
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Numero Poliza</label>
                                <input type="number" class="form-control" aria-describedby="numeroPoliza" name="numeroPoliza" [(ngModel)] = "nuevoSiniestro.numeroPoliza" required>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Dni Perito</label>
                                <input type="number" class="form-control" aria-describedby="dniPerito" name="dniPerito" [(ngModel)] = "nuevoSiniestro.dniPerito" required>
                            </div> 
                        </div>
                    </div>

             
                </form>
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="registrarSiniestro()"  class="btn btn-primary" >Registrar Siniestro</button>
                    </div>
                </div>
            </div>
            </p-accordionTab>
        </p-accordion>
        </div>
<hr>
<br>
</div>

<div class="container">
    <h2> Siniestros </h2>
    <br>
    <p-table [value]="siniestros"  [scrollable]="true"  scrollHeight="400px">
        <ng-template pTemplate="header">
            <tr>
                <th>Id</th>
                <th>Fecha</th>
                <th>Causas</th>
                <th>Aceptado</th>
                <th>Indenmización</th>
                <th>Numero Poliza</th>
                <th>Dni Perito</th>>
                <th>Opciones</th>


            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-siniestros>
            <tr [pReorderableRow]="siniestros.idSiniestro">
                <td>{{siniestros.idSiniestro}}</td>
                <td>{{siniestros.fechaSiniestro}}</td>
                <td>{{siniestros.causas}}</td>
                <td>{{siniestros.aceptado}}</td>
                <td>{{siniestros.indenmizacion}}</td>
                <td>{{siniestros.seguro.numeroPoliza}}</td>
                <td>{{siniestros.perito.dniPerito}}</td>
                <td> <div class="col-md-6">
                    <p-button icon="pi pi-pencil" (click)="modificarSiniestro(siniestros)" styleClass="p-button-warning"></p-button>
                </div>
                <div class="col-md-6">  
                    <p-button icon="pi pi-trash"  (click)="elimininarSiniestro(siniestros.idSiniestro)" styleClass="p-button-danger"></p-button>
                </div>
                </td>
             
            </tr>
        </ng-template>
    </p-table>
</div>